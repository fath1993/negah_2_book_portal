{% load static %}
<!doctype html>
<html lang="en" dir="rtl">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>کتابخانه من</title>
    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}"/>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- Typography CSS -->
    <link rel="stylesheet" href="{% static 'css/typography.css' %}">
    <!-- Style CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <script src="{% static 'fontawesomefree/js/all.min.js' %}"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
<!-- loader Start -->
<div id="loading">
    <div id="loading-center">
    </div>
</div>
<!-- loader END -->
<!-- Wrapper Start -->
<div class="wrapper">
    {% include 'appendant/sidebar.html' %}
    {% include 'appendant/top-nav-bar.html' %}
    <!-- Page Content  -->
    <div id="content-page" class="content-page">
        <div class="container-fluid checkout-content">
            <div class="row">
                <div class="col-sm-12">
                    <div class="iq-card">
                        <div class="iq-card-header d-flex justify-content-between iq-border-bottom mb-0">
                            <div class="iq-header-title">
                                <h4 class="card-title">درحال مطالعه</h4>
                            </div>
                        </div>
                        {% for reading_book in user_profile.reading_book.all %}
                        <div class="iq-card-body">
                            <ul class="list-inline p-0 m-0">
                                <li class="checkout-product">
                                    <div class="row align-items-center">
                                        <div class="col-sm-3 col-lg-2">
                                            <div class="row align-items-center">
                                                <div class="col-sm-3">
                                                    <a href="javascript:void();" onclick="remove_book_from_profile({{ reading_book.book.id }})" class="badge badge-danger"><i
                                                            class="ri-close-fill"></i></a>
                                                </div>
                                                <div class="col-sm-9">
                                             <span class="checkout-product-img">
                                             <a href="{% url 'bookshelf:book_details' book_id=reading_book.book.id book_name=reading_book.book.title %}" ><img class="img-fluid rounded"
                                                                                   src="{{ reading_book.book.on_paper_image.image_src.url }}"
                                                                                   alt="{{ reading_book.book.on_paper_image.image_alt }}"></a>
                                             </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3 col-lg-4">
                                            <div class="checkout-product-details">
                                                <h5>{{ reading_book.book.title }}</h5>
                                                <p style="color: grey"><span>نویسنده: </span>
                                                    {% for author in reading_book.book.authors.all %}
                                                    <span>{{ author.person.person_name }}</span>
                                                    {% endfor %}
                                                </p>
{#                                                <p style="color: grey"><span>مترجم: </span>#}
{#                                                    {% for interpreter in reading_book.interpreters.all %}#}
{#                                                    <span>{{ interpreter.person.person_name }}</span>#}
{#                                                    {% endfor %}#}
{#                                                </p>#}
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-lg-6">
                                            <div class="row">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        {% empty %}
                        <div class="iq-card-body">
                            <ul class="list-inline p-0 m-0">
                                <li class="checkout-product">
                                    <div class="row align-items-center">
                                        <div class="col-sm-3 col-lg-4">
                                            <b>خالی</b>
                                        </div>
                                        <div class="col-sm-6 col-lg-6">
                                            <div class="row">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        {% endfor %}
                    </div>
                </div>
{#                <div class="col-sm-12">#}
{#                    <div class="iq-card">#}
{#                        <div class="iq-card-header d-flex justify-content-between iq-border-bottom mb-0">#}
{#                            <div class="iq-header-title">#}
{#                                <h4 class="card-title">در آینده خواهم خواند</h4>#}
{#                            </div>#}
{#                        </div>#}
{#                        {% for wished_book in user_profile.wish_list.all %}#}
{#                        <div class="iq-card-body">#}
{#                            <ul class="list-inline p-0 m-0">#}
{#                                <li class="checkout-product">#}
{#                                    <div class="row align-items-center">#}
{#                                        <div class="col-sm-3 col-lg-2">#}
{#                                            <div class="row align-items-center">#}
{#                                                <div class="col-sm-3">#}
{#                                                    <a href="javascript:void(none);" class="badge badge-danger"><i#}
{#                                                            class="ri-close-fill"></i></a>#}
{#                                                </div>#}
{#                                                <div class="col-sm-9">#}
{#                                             <span class="checkout-product-img">#}
{#                                             <a href="javascript:void(none);"><img class="img-fluid rounded"#}
{#                                                                                   src="{% static 'images/checkout/01.jpg' %}"#}
{#                                                                                   alt=""></a>#}
{#                                             </span>#}
{#                                                </div>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="col-sm-3 col-lg-4">#}
{#                                            <div class="checkout-product-details">#}
{#                                                <h5>The Raze night book</h5>#}
{#                                                <p class="text-success">In stock</p>#}
{#                                                <div class="price">#}
{#                                                    <h5>$180.00</h5>#}
{#                                                </div>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="col-sm-6 col-lg-6">#}
{#                                            <div class="row">#}
{#                                            </div>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </li>#}
{#                            </ul>#}
{#                        </div>#}
{#                        {% empty %}#}
{#                        <div class="iq-card-body">#}
{#                            <ul class="list-inline p-0 m-0">#}
{#                                <li class="checkout-product">#}
{#                                    <div class="row align-items-center">#}
{#                                        <div class="col-sm-3 col-lg-4">#}
{#                                            <b>خالی</b>#}
{#                                        </div>#}
{#                                        <div class="col-sm-6 col-lg-6">#}
{#                                            <div class="row">#}
{#                                            </div>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </li>#}
{#                            </ul>#}
{#                        </div>#}
{#                        {% endfor %}#}
{#                    </div>#}
{#                </div>#}
                <div class="col-sm-12">
                    <div class="iq-card">
                        <div class="iq-card-header d-flex justify-content-between iq-border-bottom mb-0">
                            <div class="iq-header-title">
                                <h4 class="card-title">خاص شما</h4>
                            </div>
                        </div>
                        {% for special_book in user_profile.specific_book_only_for_this_user.all %}
                        <div class="iq-card-body">
                            <ul class="list-inline p-0 m-0">
                                <li class="checkout-product">
                                    <div class="row align-items-center">
                                        <div class="col-sm-3 col-lg-2">
                                            <div class="row align-items-center">
                                                <div class="col-sm-3">
                                                </div>
                                                <div class="col-sm-9">
                                             <span class="checkout-product-img">
                                             <a href="{% url 'bookshelf:book_details' book_id=special_book.id book_name=special_book.title %}" ><img class="img-fluid rounded"
                                                                                   src="{{ special_book.on_paper_image.image_src.url }}"
                                                                                   alt="{{ special_book.on_paper_image.image_alt }}"></a>
                                             </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3 col-lg-4">
                                            <div class="checkout-product-details">
                                                <h5>{{ reading_book.book.title }}</h5>
                                                <p style="color: grey"><span>نویسنده: </span>
                                                    {% for author in special_book.authors.all %}
                                                    <span>{{ author.person.person_name }}</span>
                                                    {% endfor %}
                                                </p>
                                                <p style="color: grey"><span>مترجم: </span>
                                                    {% for interpreter in special_book.interpreters.all %}
                                                    <span>{{ interpreter.person.person_name }}</span>
                                                    {% endfor %}
                                                </p>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-lg-6">
                                            <div class="row">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        {% empty %}
                        <div class="iq-card-body">
                            <ul class="list-inline p-0 m-0">
                                <li class="checkout-product">
                                    <div class="row align-items-center">
                                        <div class="col-sm-3 col-lg-4">
                                            <b>خالی</b>
                                        </div>
                                        <div class="col-sm-6 col-lg-6">
                                            <div class="row">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Wrapper END -->
<!-- Footer -->
{% include 'appendant/footer.html' %}
<!-- Footer END -->
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/popper.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<!-- Appear JavaScript -->
<script src="{% static 'js/jquery.appear.js' %}"></script>
<!-- Countdown JavaScript -->
<script src="{% static 'js/countdown.min.js' %}"></script>
<!-- Counterup JavaScript -->
<script src="{% static 'js/waypoints.min.js' %}"></script>
<script src="{% static 'js/jquery.counterup.min.js' %}"></script>
<!-- Wow JavaScript -->
<script src="{% static 'js/wow.min.js' %}"></script>
<!-- Apexcharts JavaScript -->
<script src="{% static 'js/apexcharts.js' %}"></script>
<!-- Slick JavaScript -->
<script src="{% static 'js/slick.min.js' %}"></script>
<!-- Select2 JavaScript -->
<script src="{% static 'js/select2.min.js' %}"></script>
<!-- Owl Carousel JavaScript -->
<script src="{% static 'js/owl.carousel.min.js' %}"></script>
<!-- Magnific Popup JavaScript -->
<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
<!-- Smooth Scrollbar JavaScript -->
<script src="{% static 'js/smooth-scrollbar.js' %}"></script>
<!-- lottie JavaScript -->
<script src="{% static 'js/lottie.js' %}"></script>
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<!-- am animated JavaScript -->
<script src="{% static 'js/animated.js' %}"></script>
<!-- am kelly JavaScript -->
<script src="{% static 'js/kelly.js' %}"></script>
<!-- am maps JavaScript -->
<script src="{% static 'js/maps.js' %}"></script>
<!-- am worldLow JavaScript -->
<script src="{% static 'js/worldLow.js' %}"></script>
<!-- Raphael-min JavaScript -->
<script src="{% static 'js/raphael-min.js' %}"></script>
<!-- Morris JavaScript -->
<script src="{% static 'js/morris.js' %}"></script>
<!-- Morris min JavaScript -->
<script src="{% static 'js/morris.min.js' %}"></script>
<!-- Flatpicker Js -->
<script src="{% static 'js/flatpickr.js' %}"></script>
<!-- Style Customizer -->
<script src="{% static 'js/style-customizer.js' %}"></script>
<!-- Chart Custom JavaScript -->
<script src="{% static 'js/chart-custom.js' %}"></script>
<!-- Custom JavaScript -->
<script src="{% static 'js/custom.js' %}"></script>
<script>
    function remove_book_from_profile(book_id) {
        $.ajaxSetup({
          data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
        });
        $.ajax({
            method: 'post',
            url: "{% url 'accounts:remove-book-from-profile' %}",
            data: {
                book_id: book_id,
            },
            error: function () {
                console.log("error")
                alert('نشد! دوباره امتحان کنید')
            },
            success: function (data) {
                console.log("success")
                window.location.reload();
            },
        })
    }
</script>
</body>
</html>